"use strict";var _express=require("express"),_express2=_interopRequireDefault(_express),_morgan=require("morgan"),_morgan2=_interopRequireDefault(_morgan),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_path=require("path"),_path2=_interopRequireDefault(_path);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var app=(0,_express2.default)(),SERVER_PORT=1337,router=_express2.default.Router(),accessLogStream=_fs2.default.createWriteStream(_path2.default.join(__dirname,"/logs/access.log"),{flags:"a"});app.use((0,_morgan2.default)("combined",{stream:accessLogStream,skip:function(e,r){return r.statusCode<400}})),app.use(function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),t()}),router.use("/data",require("./data")),router.use("/lights",require("./lights")),app.use("/api",router),app.listen(SERVER_PORT,function(){console.log("Server started on port: "+SERVER_PORT)});