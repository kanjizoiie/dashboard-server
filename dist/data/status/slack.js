"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}(),_client=require("@slack/client");function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var Slack=function(){function n(e){_classCallCheck(this,n),this.token=e,this.web=new _client.WebClient(this.token,{retryConfig:{retries:0},maxRequestConcurrency:1/0})}return _createClass(n,[{key:"getUserPresence",value:function(e){return this.web.users.getPresence(e).then(function(e){return e}).catch(console.error)}},{key:"getUserInfo",value:function(e){return this.web.users.info(e).then(function(e){return e}).catch(console.error)}},{key:"getStatuses",value:function(e){var t=this;return this.web.conversations.members(e).then(function(e){var n=[];return e.members.forEach(function(e){n.push(Promise.all([t.getUserInfo(e),t.getUserPresence(e)]))}),Promise.all(n).then(function(e){return e.filter(function(e){return!e[0].is_bot||!e[0].deleted})}).then(function(e){return{active:e.filter(function(e){return"active"==e[1].presence}),away:e.filter(function(e){return"away"==e[1].presence})}})}).catch(console.error)}}]),n}();exports.default=Slack;