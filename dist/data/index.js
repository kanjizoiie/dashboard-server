"use strict";var _express=require("express"),_express2=_interopRequireDefault(_express),_moment=require("moment"),_moment2=_interopRequireDefault(_moment),_axios=require("axios"),_axios2=_interopRequireDefault(_axios),_path=require("path"),_path2=_interopRequireDefault(_path);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var options=require(_path2.default.join(__dirname,"../json/options.json")),router=_express2.default.Router(),weather="";function fetchData(){_axios2.default.get("http://api.openweathermap.org/data/2.5/weather?q="+options.weather.city+"&APPID="+options.weather.key+"&units="+options.weather.units).then(function(e){weather=e.data}).catch(function(e){weather=[]}),setTimeout(fetchData,5e3)}router.use("/server",require("./server")),router.use("/news",require("./news")),router.use("/status",require("./status")),fetchData(),router.get("/",function(e,t){t.json({time:(0,_moment2.default)().format("HH:mm:ss"),date:(0,_moment2.default)().format("DD-MM-YY"),weather:weather})}),router.get("/date",function(e,t,r){t.json({value:(0,_moment2.default)().format("DD-MM-YY")})}),router.get("/time",function(e,t,r){t.json({value:(0,_moment2.default)().format("HH:mm:ss")})}),router.get("/weather",function(e,t,r){t.json(weather)}),module.exports=router;